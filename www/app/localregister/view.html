<ion-view view-title="Agregá tu local ">
  <ion-content class="padding">
    <form name="localregister" autocomplete="off" ng-submit="vm.createOwnerAccount()">
    <div class="card">
      <div class="item item-divider">
        Datos del local
      </div>
      <div class="list">
        <label class="item item-input">
          <span class="input-label">Nombre</span>
          <input type="text" name="localname" ng-model="vm.localOwner.info.localname" required>
        </label>
        <label class="item" ng-show="(localregister.localname.$touched && localregister.localname.$error.required)">
          <span class="error">Debe ingresar un nombre</span>
        </label>
        <label class="item item-input">
          <span class="input-label">Dirección</span>
          <input type="text" name="localaddress" ng-model="vm.localOwner.info.localaddress" required>
        </label>
        <label class="item" ng-show="(localregister.localaddress.$touched && localregister.localaddress.$error.required)">
          <span class="error">Debe ingresar una dirección física</span>
        </label>
        <label class="item item-input">
          <span class="input-label">Teléfono</span>
          <input type="tel" name="localphone" ng-model="vm.localOwner.info.localphone">
        </label>
      </div>
    </div>
    <div class="card">
      <div class="item item-divider">
        Datos del Dueño
      </div>
      <div class="list">
        <label class="item item-input">
          <span class="input-label">Nombre</span>
          <input type="text" name="ownerName" ng-model="vm.localOwner.info.ownerName" required>
        </label>
        <label class="item" ng-show="(localregister.ownerName.$touched && localregister.ownerName.$error.required)">
          <span class="error">Debe ingresar un nombre</span>
        </label>
        <label class="item item-input">
          <span class="input-label">Teléfono</span>
          <input type="tel" name="ownerPhone" ng-model="vm.localOwner.info.ownerPhone">
        </label>
        <label class="item item-input">
          <span class="input-label">Email</span>
          <input type="email" name="email" ng-model="vm.localOwner.credentials.email" required>
        </label>
        <label class="item" ng-show="(localregister.email.$touched && localregister.email.$error.required)">
          <span class="error">Debe ingresar un email</span>
        </label>
        <label class="item" ng-show="localregister.email.$error.email">
          <span class="error">Email inválido</span>
        </label>
        <label class="item item-input">
          <span class="input-label">Contraseña</span>
          <input type="password" name="password" ng-model="vm.localOwner.credentials.password" ng-minlength="6" required>
        </label>
        <label class="item" ng-show="(localregister.password.$touched && localregister.password.$error.required)">
          <span class="error">Debe ingresar una contraseña</span>
        </label>
        <label class="item" ng-show="localregister.password.$error.minlength">
          <span class="error">La contraseña debe tener al menos 6 caracteres</span>
        </label>
        <label class="item item-input">
          <span class="input-label">Repetir contraseña</span>
          <input type="password" name="passwordConfirm" ng-model="vm.passwordConfirm" ng-pattern="{{ vm.localOwner.credentials.password }}" required>
        </label>
        <label class="item" ng-show="(localregister.passwordConfirm.$touched && localregister.passwordConfirm.$error.required)">
          <span class="error">Repita la contraseña</span>
        </label>
        <label class="item" ng-show="localregister.passwordConfirm.$error.pattern">
          <span class="error">Las contraseñas no coinciden</span>
        </label>
      </div>
    </div>
    <div class="card" ng-show="vm.localOwner.credentials.password">
      <div class="item item-divider">
        Seguridad de la contraseña
      </div>
      <div class="password-strength-indicator"
          ng-class="{'weak': vm.isPasswordWeak(),
                     'med': vm.isPasswordMed(),
                     'strong': vm.isPasswordStrong()}"
          ng-password-strength="vm.localOwner.credentials.password"
          strength="vm.passwordStrength"
          style="width: {{ vm.passwordStrength }}%; transition: width 0.2s;"></div>
    </div>
    <button class="button button-block button-assertive" type="submit" on-click="vm.createOwnerAccount()" ng-disabled="localregister.$invalid">Registrar</button>
  </form>
  </ion-content>
</ion-view>
